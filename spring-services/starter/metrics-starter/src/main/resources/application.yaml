management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      probes:
        enabled: true
      show-details: when_authorized
      show-components: when_authorized
  tracing:
    sampling:
      probability: ${TRACING_SAMPLE_RATE:0.1}   # 10% prod, override to 1.0 for dev
  zipkin:
    tracing:
      endpoint: ${ZIPKIN_ENDPOINT:http://localhost:9411/api/v2/spans}
  metrics:
    tags:
      service: ${spring.application.name}
      env: ${SPRING_PROFILES_ACTIVE:dev}
    distribution:
      percentiles-histogram:
        http.server.requests: true
      percentiles:
        http.server.requests: 0.5,0.95,0.99

logging:
  pattern:
    console: >-
      {"timestamp":"%d{yyyy-MM-dd'T'HH:mm:ss.SSSZ}","level":"%level",
       "service":"${spring.application.name}","traceId":"%X{traceId}",
       "spanId":"%X{spanId}","userId":"%X{userId}","requestId":"%X{requestId}",
       "message":"%msg","logger":"%logger{36}"}%n
